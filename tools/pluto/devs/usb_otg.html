<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>USB OTG &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=35d1b53a" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="../../../_static/app.umd.js?v=689b8755"></script>
    <link rel="icon" href="../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="For Hackers" href="../hacking/index.html" />
    <link rel="prev" title="For Developers" href="index.html" />
   
  
  <meta name="global_root" content="../../../../">
  <meta name="repo" content="documentation">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../index.html" class="current">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">USB OTG</a><ul>
<li><a class="reference internal" href="#running-applications-from-usb-drives">Running applications from USB drives</a><ul>
<li><a class="reference internal" href="#basic-example">Basic Example</a></li>
<li><a class="reference internal" href="#advanced-examples">Advanced examples</a><ul>
<li><a class="reference internal" href="#send-a-tone">Send a tone</a></li>
<li><a class="reference internal" href="#re-purposing-the-button">Re purposing the button</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../index.html" class="current">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../../linux/kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/update.html">Updating</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/index.html">Linux drivers</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/index.html">IIO Transceivers</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/adrv9009/index.html">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/adrv9009/customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../linux/drivers/iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../linux/drivers/iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../../linux/kernel/index.html">Kernel and devicetrees</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kernel/petalinux.html">Building with Petalinux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../../../software/libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6"/><div class="collapse"><a class="reference internal" href="../../../software/libm2k/index.html">Libm2k</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/digital_communication.html">Digital communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/m2kcli.html">Command line utility</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../../../software/matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/pyadi-iio/index.html">PyADI-IIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/adc_pulsar_single/index.html">Single-Channel, SPI-interface SAR ADC Developer Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/adaq2387/index.html">ADAQ2387x and LTC2387 family SAR ADC Developer Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/eval-adxl355-pmdz/index.html">ADXL355 3-Axis MEMS Accelerometer Developer Resources</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8-1" id="toctree-collapse-8-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-8-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8-1-1" id="toctree-collapse-8-1-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-8-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../eval/user-guide/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/eval-adtf3175d-nxz/index.html">EVAL-ADTF3175D-NXZ User Guide</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products &amp; Tools</span></p>
<ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../m2k/index.html">ADALM2000</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../m2k/devs/index.html">For Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m2k/users/index.html">For End Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m2k/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m2k/labview.html">Using With LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m2k/matlab.html">Using with MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-10" id="toctree-collapse-10"/><div class="collapse"><a class="reference internal" href="../../pluto-m2k/index.html">Common PLUTO&amp;M2K</a><label for="toctree-collapse-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/building_the_image.html">Building the Firmware Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/drivers.html">Installing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/firmware.html">Firmware Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/obtaining_the_sources.html">Obtaining the Build Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/reboot.html">Rebooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pluto-m2k/usb_otg_host.html">USB OTG – HOST function Support</a></li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11" id="toctree-collapse-11" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">ADALM-PLUTO</a><label for="toctree-collapse-11"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11-1" id="toctree-collapse-11-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">For Developers</a><label for="toctree-collapse-11-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">USB OTG</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11-2" id="toctree-collapse-11-2"/><div class="collapse"><a class="reference internal" href="../hacking/index.html">For Hackers</a><label for="toctree-collapse-11-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacking/hardware.html">ADALM-PLUTO Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacking/listening_to_yourself.html">Self Reception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacking/power_amp.html">Controlling External Devices</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11-3" id="toctree-collapse-11-3"/><div class="collapse"><a class="reference internal" href="../users/index.html">For End Users</a><label for="toctree-collapse-11-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../users/antennas.html">Antennas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transceiver_transferring_data.html">Controlling the transceiver and transferring data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../uartjtag/index.html">ADALM-UARTJTAG</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12" id="toctree-collapse-12"/><div class="collapse"><a class="reference internal" href="../../../university/index.html">Engineering University Program</a><label for="toctree-collapse-12"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-1" id="toctree-collapse-12-1"/><div class="collapse"><a class="reference internal" href="../../../university/active_learning/index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-12-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../university/active_learning/wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../university/active_learning/efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../university/active_learning/buck_converter_basics/index.html">Activity: Buck Converter Basics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../university/active_learning/index.html#main-lab-activities-and-exercise-list">Main Lab Activities and Exercise List</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13" id="toctree-collapse-13"/><div class="collapse"><a class="reference internal" href="../../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-13"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/sw_infrastructure/index.html">Key ADI’s Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshop_what_sw_for_sdr/index.html">What software do I need for my SDR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/low_freq_noise/index.html">Low Frequency Noise KWIK Lecture + Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/integrated_noise/index.html">Integrated Noise KWIK Lecture + Lab</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LTspice Examples</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14" id="toctree-collapse-14"/><div class="collapse"><a class="reference internal" href="../../../ltspice_examples/index.html">LTspice Examples</a><label for="toctree-collapse-14"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ltspice_examples/lvds_pair/index.html">LTspice Example: LVDS pair</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/forking_publishing.html">Forking and publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/creating_new_pages.html">Creating new pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="usb-otg">
<span id="pluto-devs-usb-otg"></span><h1>USB OTG<a class="headerlink" href="#usb-otg" title="Link to this heading"></a></h1>
<p>The ADALM-PLUTO and ADLAM2000 support
<a class="reference external" href="https://en.wikipedia.org/wiki/USB_On-The-Go">USB_On-The-Go</a>.
This allows a few different use cases for these instruments.</p>
<section id="running-applications-from-usb-drives">
<h2>Running applications from USB drives<a class="headerlink" href="#running-applications-from-usb-drives" title="Link to this heading"></a></h2>
<p>The Pluto will automount any
<a class="reference external" href="https://en.wikipedia.org/wiki/USB_mass_storage_device_class">USB mass storage device</a> such as
<a class="reference external" href="https://en.wikipedia.org/wiki/USB_flash_drive">thumb drive</a> or
<a class="reference external" href="https://en.wikipedia.org/wiki/Hard_disk_drive#EXTERNAL">Hard Drives</a>.
The automounter will then look for some special file names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">runme[0-9].sh</span></code> which it will run as a shell script</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runme[0-9]</span></code> which it will run as a binary file.</p></li>
</ul>
<p>For those interested, it will do that via the automounter script in
<code class="docutils literal notranslate"><span class="pre">/lib/mdev/automounter.sh</span></code> which is maintained
<a class="icon git reference external" href="https://github.com/analogdevicesinc/buildroot/tree/main/board/pluto/automounter.sh">here</a>.</p>
<p>Note 1 : if you’re editing the runme.sh file from windows, make sure you use
‘LF’ as file line ending.</p>
<p>Note 2 : The power supply (and USB cable quality) of the ADALM-PLUTO have an
influence on the otg storage device plug detection.</p>
<section id="basic-example">
<h3>Basic Example<a class="headerlink" href="#basic-example" title="Link to this heading"></a></h3>
<p>For those who just want to do something, create a <code class="docutils literal notranslate"><span class="pre">runme0.sh</span></code> file on a thumb
drive (FAT32 is fine) which looks like a normal unix
<a class="reference external" href="https://en.wikipedia.org/wiki/Shell_script">shell script</a>.
To debug your shell script, try your commands via ssh before putting them in the script.
This example requires at least firmware v0.22.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="c1"># the default directory the script runs in is /dev, so change to the drive</span>
<span class="nb">cd</span><span class="w"> </span>/media/sda1/

<span class="c1"># create a file</span>
touch<span class="w"> </span>foobar

<span class="c1"># change the RX_LO to 2.4GHz</span>
iio_attr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w">  </span>ad9361-phy<span class="w"> </span>RX_LO<span class="w"> </span>frequency<span class="w"> </span><span class="m">2400000000</span>
</pre></div>
</div>
<p>and insert the USB thumb drive in to Pluto.</p>
<p>The LED should stop blinking, and you have run your application. To safely
unmount the drive, you should press the button, which will cause the drive to by
sync’ed, file systems caches flushed, and properly unmount the drive.</p>
</section>
<section id="advanced-examples">
<h3>Advanced examples<a class="headerlink" href="#advanced-examples" title="Link to this heading"></a></h3>
<section id="send-a-tone">
<h4>Send a tone<a class="headerlink" href="#send-a-tone" title="Link to this heading"></a></h4>
<p>The code below sets up a tone, and plays it out via the DDS (the AD9361’s test
mode). It then unmounts the drive it is running on, so you can unplug the USB
drive. All that is necessary is to boot while the uSB drive is plugged in, and
that is it. This example requires at least firmware v0.22.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="c1"># the default directory the script runs in is /dev, so change to the drive</span>
<span class="nb">cd</span><span class="w"> </span>/media/sda1/

<span class="c1"># create a file</span>
touch<span class="w"> </span>foobar.txt

<span class="nb">echo</span><span class="w"> </span>default-on<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/leds/led0:green/trigger<span class="w"> </span>&gt;&gt;<span class="w"> </span>foobar.txt

<span class="c1"># Set the LO up</span>
/usr/bin/iio_attr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span>ad9361-phy<span class="w"> </span>TX_LO<span class="w"> </span>frequency<span class="w"> </span><span class="m">908460000</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>foobar.txt

<span class="c1"># Set the Sample frequency up, tone will appear at sampling_frequency/32</span>
/usr/bin/iio_attr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span>-o<span class="w"> </span>ad9361-phy<span class="w"> </span>voltage0<span class="w"> </span>sampling_frequency<span class="w"> </span><span class="m">32000000</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>foobar.txt

<span class="c1"># Turn the attenuation down</span>
/usr/bin/iio_attr<span class="w"> </span>-a<span class="w"> </span>-c<span class="w"> </span>-o<span class="w"> </span>ad9361-phy<span class="w"> </span>voltage0<span class="w"> </span>hardwaregain<span class="w"> </span><span class="m">0</span>

<span class="c1"># https://wiki.analog.com/resources/tools-software/linux-drivers/iio-transceiver/ad9361#bist_tone</span>
<span class="c1"># Inject 0dBFS tone at Fsample/32 into TX (all channels enabled)</span>
/usr/bin/iio_attr<span class="w"> </span>-a<span class="w"> </span>-D<span class="w"> </span>ad9361-phy<span class="w"> </span>bist_tone<span class="w"> </span><span class="s2">&quot;1 0 0 0&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>foobar.txt

<span class="nb">cd</span><span class="w"> </span>/root

<span class="nv">ACTION</span><span class="o">=</span>remove_all<span class="w"> </span>/lib/mdev/automounter.sh
</pre></div>
</div>
</section>
<section id="re-purposing-the-button">
<h4>Re purposing the button<a class="headerlink" href="#re-purposing-the-button" title="Link to this heading"></a></h4>
<p>The below script will change the function of the button. Rather than unmounting
things, it pressing the button will run a script. Holding the button for longer
than 5 seconds will unmount things.</p>
<p>This requires a few different scripts, and modification of a configuration file.</p>
<p>To manage the button, pluto uses the <a class="reference external" href="https://github.com/gandro/input-event-daemon">input event daemon</a>
(<a class="reference external" href="https://htmlpreview.github.io/?https://github.com/gandro/input-event-daemon/blob/master/docs/input-event-daemon.html">doc</a>).
The default configuration file can be found at
<a class="icon git reference external" href="https://github.com/analogdevicesinc/buildroot/tree/master/board/pluto/input-event-daemon.conf">here</a>,
and simply calls the automounter (unmounter), when you press the button. Our
script kills that, and re-starts things with different configuration file (our
our mass storage device).</p>
</section>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">For Developers</a>
    <a href="../hacking/index.html" title="Next document (Alt+Shift+RightArrow)" class="next">For Hackers</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>