<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Kernel and devicetrees &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.min.css?v=95305861" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="../../_static/app.umd.js?v=c93eadd1"></script>
    <link rel="icon" href="../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Building with Petalinux" href="petalinux.html" />
    <link rel="prev" title="iio-trig-bfin-timer driver" href="../drivers/iio/iio-trig-bfin-timer.html" />
   
  
  <meta name="global_root" content="../../../">
  <meta name="repo" content="documentation">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../index.html" class="current">System Level</a>
  <a href="../../../hdl/index.html">HDL</a>
  <a href="../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../libiio/index.html">libiio</a>
  <a href="../../../no-OS/index.html">no-OS</a>
  <a href="../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../scopy/index.html">Scopy</a>
  <a href="../../../doctools/index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header">On this page</div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Kernel and devicetrees</a><ul>
<li><a class="reference internal" href="#building-the-zynq-linux-kernel-and-devicetrees-from-source">Building the Zynq Linux kernel and devicetrees from source</a><ul>
<li><a class="reference internal" href="#using-a-script">Using a script</a></li>
<li><a class="reference internal" href="#building-with-petalinux">Building with Petalinux</a></li>
<li><a class="reference internal" href="#on-the-development-host">On the development host</a><ul>
<li><a class="reference internal" href="#checkout-the-release-branch">Checkout the Release branch</a></li>
<li><a class="reference internal" href="#setup-cross-compile-environment-variables">Setup cross compile environment variables</a><ul>
<li><a class="reference internal" href="#using-the-xilinx-toolchain">Using the Xilinx toolchain</a></li>
<li><a class="reference internal" href="#using-the-linaro-toolchain">Using the Linaro toolchain</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-the-kernel">Configure the kernel</a></li>
<li><a class="reference internal" href="#build-the-kernel">Build the kernel</a></li>
<li><a class="reference internal" href="#build-the-devicetree-fcmomms2-3-4-5">Build the devicetree FCMOMMS2/3/4/5</a></li>
<li><a class="reference internal" href="#copy-the-generated-files-to-your-sd-card">Copy the generated files to your SD Card</a></li>
</ul>
</li>
<li><a class="reference internal" href="#on-the-target-platform-devicetrees">On the target platform (devicetrees)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-the-zynqmp-mpsoc-linux-kernel-and-devicetrees-from-source">Building the ZynqMP / MPSoC Linux kernel and devicetrees from source</a><ul>
<li><a class="reference internal" href="#id1">Using a script</a></li>
<li><a class="reference internal" href="#id2">Building with Petalinux</a></li>
<li><a class="reference internal" href="#id3">On the development host</a><ul>
<li><a class="reference internal" href="#checkout-the-main-development">Checkout the main development</a></li>
<li><a class="reference internal" href="#add-aarch64-linux-gnu-gcc-to-path">Add aarch64-linux-gnu-gcc to PATH</a><ul>
<li><a class="reference internal" href="#id4">Using the Xilinx toolchain</a></li>
<li><a class="reference internal" href="#id5">Using the Linaro toolchain</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Configure the kernel</a></li>
<li><a class="reference internal" href="#build-the-devicetree-fcmomms2-3">Build the devicetree FCMOMMS2/3</a></li>
<li><a class="reference internal" href="#id7">Copy the generated files to your SD Card</a></li>
</ul>
</li>
<li><a class="reference internal" href="#common-issues">Common Issues</a><ul>
<li><a class="reference internal" href="#displayport-no-picture">DisplayPort - no picture?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../index.html" class="current">System Level</a>
  <a href="../../../hdl/index.html">HDL</a>
  <a href="../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../libiio/index.html">libiio</a>
  <a href="../../../no-OS/index.html">no-OS</a>
  <a href="../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../scopy/index.html">Scopy</a>
  <a href="../../../doctools/index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kuiper/update.html">Updating</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../drivers/index.html">Linux drivers</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../drivers/iio-transceiver/index.html">IIO Transceivers</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../drivers/iio-transceiver/adrv9009/index.html">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../drivers/iio-transceiver/adrv9009/customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../drivers/iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../drivers/iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../drivers/iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3" checked=""/><div class="collapse"><a class="current reference internal" href="#">Kernel and devicetrees</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="petalinux.html">Building with Petalinux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../../software/iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../../software/iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../software/iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../software/iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../../software/libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software/libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6"/><div class="collapse"><a class="reference internal" href="../../software/matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../software/matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../software/pyadi-iio/index.html">PyADI-IIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../eval/user-guide/eval-adxl355-pmdz/index.html">EVAL-ADXL355-PMDZ User Guide</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7-1" id="toctree-collapse-7-1"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-7-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7-1-1" id="toctree-collapse-7-1-1"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-7-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../eval/user-guide/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8"/><div class="collapse"><a class="reference internal" href="../../university/index.html">Engineering University Program</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8-1" id="toctree-collapse-8-1"/><div class="collapse"><a class="reference internal" href="../../university/active_learning/index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-8-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../university/active_learning/wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../university/active_learning/efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/sw_infrastructure/index.html">Key ADI’s Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/forking_publishing.html">Forking and publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/creating_new_pages.html">Creating new pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="kernel-and-devicetrees">
<span id="linux-kernel"></span><h1>Kernel and devicetrees<a class="headerlink" href="#kernel-and-devicetrees" title="Link to this heading">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>This section provides a concise guide on building the Linux kernel and
devicetrees for different platforms on different hosts.</p>
<p>Jump to your platform and preferred method:</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#building-the-zynq-linux-kernel-and-devicetrees-from-source" id="id8">Building the Zynq Linux kernel and devicetrees from source</a></p>
<ul>
<li><p><a class="reference internal" href="#using-a-script" id="id9">Using a script</a></p></li>
<li><p><a class="reference internal" href="#building-with-petalinux" id="id10">Building with Petalinux</a></p></li>
<li><p><a class="reference internal" href="#on-the-development-host" id="id11">On the development host</a></p></li>
<li><p><a class="reference internal" href="#on-the-target-platform-devicetrees" id="id12">On the target platform (devicetrees)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-zynqmp-mpsoc-linux-kernel-and-devicetrees-from-source" id="id13">Building the ZynqMP / MPSoC Linux kernel and devicetrees from source</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id14">Using a script</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id15">Building with Petalinux</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id16">On the development host</a></p></li>
<li><p><a class="reference internal" href="#common-issues" id="id17">Common Issues</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="building-the-zynq-linux-kernel-and-devicetrees-from-source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Building the Zynq Linux kernel and devicetrees from source</a><a class="headerlink" href="#building-the-zynq-linux-kernel-and-devicetrees-from-source" title="Link to this heading">#</a></h2>
<section id="using-a-script">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Using a script</a><a class="headerlink" href="#using-a-script" title="Link to this heading">#</a></h3>
<p>We provide
<a class="icon git reference external" href="https://raw.githubusercontent.com/analogdevicesinc/wiki-scripts/main/linux/build_zynq_kernel_image.sh">a script</a>
that does automates the build for Zynq using the Linaro toolchain.</p>
<p>The script takes up to 3 parameters, but if left blank, it uses defaults:</p>
<ol class="arabic simple">
<li><p><strong>&lt;local_kernel_dir&gt;</strong> - default is <strong>linux-adi</strong> if left blank ; use this,
if you want to use an already cloned kernel repo</p></li>
<li><p><strong>&lt;devicetree_file&gt;</strong> - which device tree should be exported/copied from the
build. Default is <code class="docutils literal notranslate"><span class="pre">zynq-zc702-adv7511-ad9361-fmcomms2-3.dtb</span></code> for Zynq</p></li>
<li><p><strong>&lt;path_to_other_toolchain&gt;</strong> - in case you have your own preferred toolchain
(other than Linaro’s or Xilinx’s) you can use override it with this 3rd param</p></li>
</ol>
<p>The script will:</p>
<ul class="simple">
<li><p>Clone the ADI kernel tree</p></li>
<li><p>Download the Linaro GCC toolchain (if no other is specified)</p></li>
<li><p>Build the ADI kernel tree</p></li>
<li><p>Export/copy the Image file and device tree file out of the kernel build folder</p></li>
</ul>
<p>Running the script in one line, with defaults:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://raw.githubusercontent.com/analogdevicesinc/wiki-scripts/main/linux/build_zynq_kernel_image.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
chmod<span class="w"> </span>+x<span class="w"> </span>build_zynq_kernel_image.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
./build_zynq_kernel_image.sh
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="building-with-petalinux">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Building with Petalinux</a><a class="headerlink" href="#building-with-petalinux" title="Link to this heading">#</a></h3>
<p>Please see here: <a class="reference internal" href="petalinux.html#linux-kernel-petalinux"><span class="std std-ref">Building with Petalinux</span></a>.</p>
</section>
<section id="on-the-development-host">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">On the development host</a><a class="headerlink" href="#on-the-development-host" title="Link to this heading">#</a></h3>
<p>Make sure you have <code class="docutils literal notranslate"><span class="pre">u-boot-tools</span></code> installed, to have the <code class="docutils literal notranslate"><span class="pre">mkimage</span></code> utility
available. You can install it via your distro’s package manager.</p>
<p>Then</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/analogdevicesinc/linux.git<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>--no-single-branch<span class="w"> </span>--depth<span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>--<span class="w"> </span>linux
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>or do a git pull in a existing cloned repository.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">depth</span></code> and <code class="docutils literal notranslate"><span class="pre">no-single-branch</span></code> options are included to speed up the
cloning by fetching only near the head of each branch/release, you may remove
them to fetch all history, but bear in mind it will go from around 800MB to
around 3.4GB and growing.</p>
<section id="checkout-the-release-branch">
<h4>Checkout the Release branch<a class="headerlink" href="#checkout-the-release-branch" title="Link to this heading">#</a></h4>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use the latest release, if not required otherwise!</p>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Release names and Branches</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2014_R2</p></td>
</tr>
<tr class="row-odd"><td><p>2015_R2</p></td>
</tr>
<tr class="row-even"><td><p>2016_R1</p></td>
</tr>
<tr class="row-odd"><td><p>2016_R2</p></td>
</tr>
<tr class="row-even"><td><p>2017_R1</p></td>
</tr>
<tr class="row-odd"><td><p>2018_R1</p></td>
</tr>
<tr class="row-even"><td><p>2018_R2</p></td>
</tr>
<tr class="row-odd"><td><p>2019_R1</p></td>
</tr>
<tr class="row-even"><td><p>2019_R2</p></td>
</tr>
<tr class="row-odd"><td><p>2021_R1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>origin/2021_R1<span class="w"> </span>-b<span class="w"> </span>2021_R1
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>Branch 2021_R1 set up to track remote branch 2021_R1 from origin.
Switched to a new branch &#39;2021_R1&#39;
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="setup-cross-compile-environment-variables">
<h4>Setup cross compile environment variables<a class="headerlink" href="#setup-cross-compile-environment-variables" title="Link to this heading">#</a></h4>
<p>There are a few toolchains that can be used. The Xilinx toolchain is
recommended, but the Linaro toolchain can also be used.</p>
<p>Other toolchains/compilers for ARM may work as well, but the ones described here
have been tested and found to work.</p>
<section id="using-the-xilinx-toolchain">
<h5>Using the Xilinx toolchain<a class="headerlink" href="#using-the-xilinx-toolchain" title="Link to this heading">#</a></h5>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Release names and Branches</p></th>
<th class="head"><p>Required Vivado/Vitis versions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2014_R2</p></td>
<td><p>Vivado 2014.2</p></td>
</tr>
<tr class="row-odd"><td><p>2015_R2</p></td>
<td><p>Vivado 2015.2</p></td>
</tr>
<tr class="row-even"><td><p>2016_R1</p></td>
<td><p>Vivado 2015.4.2</p></td>
</tr>
<tr class="row-odd"><td><p>2016_R2</p></td>
<td><p>Vivado 2016.2</p></td>
</tr>
<tr class="row-even"><td><p>2017_R1</p></td>
<td><p>Vivado 2016.4</p></td>
</tr>
<tr class="row-odd"><td><p>2018_R1</p></td>
<td><p>Vivado 2017.4</p></td>
</tr>
<tr class="row-even"><td><p>2018_R2</p></td>
<td><p>Vivado 2018.2</p></td>
</tr>
<tr class="row-odd"><td><p>2019_R1</p></td>
<td><p>Vivado 2018.3</p></td>
</tr>
<tr class="row-even"><td><p>2019_R2</p></td>
<td><p>Vivado 2019.1</p></td>
</tr>
<tr class="row-odd"><td><p>2021_R1</p></td>
<td><p>Vivado 2021.1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span><span class="nv">$PATH_TO_XILINX</span>/Vitis/<span class="nv">$VITIS_VERSION</span>/settings64.sh
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>which<span class="w"> </span>which<span class="w"> </span>arm-linux-gnueabihf-gcc
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>$PATH_TO_XILINX/Vitis/$VITIS_VERSION/gnu/aarch32/lin/gcc-arm-linux-gnueabi/bin/arm-linux-gnueabihf-gcc
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>Find the path to the Xilinx installation folder, and then use
it to replace this string: <strong>$PATH_TO_XILINX</strong> that is written above.
Same goes for the <strong>$VITIS_VERSION</strong>, where you choose the Vitis version.</p>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="s2">&quot;arm-linux-gnueabihf-&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="using-the-linaro-toolchain">
<h5>Using the Linaro toolchain<a class="headerlink" href="#using-the-linaro-toolchain" title="Link to this heading">#</a></h5>
<p>Alternatively, the Linaro toolchain/compiler can be used to compile to kernel.
Linaro compilers (that work with Zynq) can be downloaded from
<a class="reference external" href="https://releases.linaro.org/components/toolchain/binaries/latest-7/arm-linux-gnueabi">here</a>.
Always use the latest release just in case.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://releases.linaro.org/components/toolchain/binaries/latest-7/arm-linux-gnueabi/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabi.tar.xz
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-xvf<span class="w"> </span>gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabi.tar.xz
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabi/bin/arm-linux-gnueabi-
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="configure-the-kernel">
<h4>Configure the kernel<a class="headerlink" href="#configure-the-kernel" title="Link to this heading">#</a></h4>
<p>Inside the repository, generate the configuration file before building the
kernel tree.
The command shown below is generic and is not project specific.
As long as the board is a ZYNQ FPGA, use the configuration below.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>zynq_xcomm_adv7511_defconfig
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>#
# configuration written to .config
#
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="build-the-kernel">
<h4>Build the kernel<a class="headerlink" href="#build-the-kernel" title="Link to this heading">#</a></h4>
<p>Build the kernel via ‘make’. This is the same for all Xilinx ZYNQ FPGAs.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>-j5<span class="w"> </span><span class="nv">UIMAGE_LOADADDR</span><span class="o">=</span>0x8000<span class="w"> </span>uImage
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>scripts/kconfig/conf --silentoldconfig Kconfig
  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  UPD     include/config/kernel.release
  CHK     include/generated/utsrelease.h

[ -- snip --]

  AS      arch/arm/boot/compressed/bswapsdi2.o
  AS      arch/arm/boot/compressed/piggy.gzip.o
  LD      arch/arm/boot/compressed/vmlinux
  OBJCOPY arch/arm/boot/zImage
  Kernel: arch/arm/boot/zImage is ready
  UIMAGE  arch/arm/boot/uImage
Image Name:   Linux-3.17.0-126697-g611e217-dir
Created:      Fri Nov 28 10:20:40 2014
Image Type:   ARM Linux Kernel Image (uncompressed)
Data Size:    3195872 Bytes = 3120.97 kB = 3.05 MB
Load Address: 00008000
Entry Point:  00008000
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="build-the-devicetree-fcmomms2-3-4-5">
<h4>Build the devicetree FCMOMMS2/3/4/5<a class="headerlink" href="#build-the-devicetree-fcmomms2-3-4-5" title="Link to this heading">#</a></h4>
<p>Build the one that fits your FPGA carrier and FMC card</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>device tree</p></th>
<th class="head"><p>board</p></th>
<th class="head"><p>chip</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>zynq-adrv9361-z7035-bob</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-BOB">ADRV1CRR-BOB</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9361">ADRV9361</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-adrv9361-z7035-bob-cmos</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-BOB">ADRV1CRR-BOB</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9361">ADRV9361</a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-adrv9361-z7035-packrf</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV-PACKRF">ADRV-PACKRF</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9361">ADRV9361</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-adrv9361-z7035-fmc</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-FMC">ADRV1CRR-FMC</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9361">ADRV9361</a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-adrv9361-z7035-fmc-rfcard-tdd</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-FMC">ADRV1CRR-FMC</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board), the</div>
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9361">ADRV9361</a> and the</div>
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/AD-PZSDR2400TDD-EB">AD-PZSDR2400TDD-EB</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-adrv9364-z7020-bob</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-BOB">ADRV1CRR-BOB</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9364">ADRV9364</a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-adrv9364-z7020-bob-cmos</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV1CRR-BOB">ADRV1CRR-BOB</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9364">ADRV9364</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-adrv9364-z7020-packrf</p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADRV-PACKRF">ADRV-PACKRF</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADRV9364">ADRV9364</a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-coraz7s</p></td>
<td><p><a class="reference external" href="https://digilent.com/reference/programmable-logic/cora-z7/start">Cora Z7</a></p></td>
<td><div class="line-block">
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-mini-itx-adv7511</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/mini-itx">Mini-ITX</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-mini-itx-adv7511-ad9361-fmcomms2-3</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/mini-itx">Mini-ITX</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board)</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a></div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-mini-itx-adv7511-ad9364-fmcomms4</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/mini-itx">Mini-ITX</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc702-adv7511</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC702">ZC702</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc702-adv7511-ad9361-fmcomms2-3</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC702">ZC702</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc702-adv7511-ad9361-fmcomms5</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC702">ZC702</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms5-ebz">AD-FMCOMMS5-EBZ</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc702-adv7511-ad9364-fmcomms4</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC702">ZC702</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-ad6676-fmc</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/ad6676-wideband_rx_subsystem_ad6676ebz">AD6676-FMC-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-ad9265-fmc-125ebz</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/fpga/xilinx/fmc/ad9265">AD9265-FMC-125EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-ad9361-fmcomms2-3</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-ad9361-fmcomms5</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms5-ebz">AD-FMCOMMS5-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-ad9361-fmcomms5-ext-lo-adf5355</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms5-ebz">AD-FMCOMMS5-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-ad9364-fmcomms4</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-ad9434-fmc-500ebz</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/fpga/xilinx/fmc/ad9434">AD9434-FMC-500EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-ad9625-fmcadc2</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcdaq2-ebz">AD-FMCADC2-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-ad9739a-fmc</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/EVAL-AD9739A">EVAL-AD9739A</a></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-adrv9371</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/mykonos">ADRV9371</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-adrv9375</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/mykonos">ADRV9375</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-fmcadc4</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcadc4-ebz">AD-FMCADC4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-fmcdaq2</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcdaq2-ebz">AD-FMCDAQ2-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-adv7511-fmcdaq3</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcdaq3-ebz">AD-FMCDAQ3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zc706-adv7511-fmcjesdadc1</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcjesdadc1-ebz">AD-FMCJESDADC1-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zc706-imageon</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZC706">ZC706</a></p></td>
<td><div class="line-block">
<div class="line">FMC-IMAGEON</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zed-adv7511</p></td>
<td><p><a class="reference external" href="http://zedboard.org/product/zedboard">Zed Board</a></p></td>
<td><p><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board)</p></td>
</tr>
<tr class="row-even"><td><p>zynq-zed-adv7511-ad9361-fmcomms2-3</p></td>
<td><p><a class="reference external" href="http://zedboard.org/product/zedboard">Zed Board</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zed-adv7511-ad9364-fmcomms4</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/zedboard">ZedBoard</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zed-adv7511-ad9467-fmc-250ebz</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/zedboard">ZedBoard</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/ad9467-fmc-250ebz">AD9467-FMC-250EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynq-zed-adv7511-cn0363</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/zedboard">ZedBoard</a></p></td>
<td><div class="line-block">
<div class="line"><a class="icon adi reference external" href="https://www.analog.com/ADV7511">ADV7511</a> (on-board) and the</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/eval-cn0363-pmdz">EVAL-CN0363-PMDZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynq-zed-imageon</p></td>
<td><p><a class="reference external" href="https://www.avnet.com/wps/portal/us/products/avnet-boards/avnet-board-families/zedboard">ZedBoard</a></p></td>
<td><div class="line-block">
<div class="line">FMC-IMAGEON</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>Building the device tree uses ‘make’ by turning the .dts file to a .dtb. The
command is simply ‘make’ plus the device tree name with a .dtb file extension.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>zynq-zc702-adv7511-ad9361.dtb
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>DTC     arch/arm/boot/dts/zynq-zc702-adv7511-ad9361.dtb
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="copy-the-generated-files-to-your-sd-card">
<h4>Copy the generated files to your SD Card<a class="headerlink" href="#copy-the-generated-files-to-your-sd-card" title="Link to this heading">#</a></h4>
<p>The output files for building the kernel and device tree are <strong>uImage</strong> and
<strong>&lt;device_tree_name&gt;.dtb</strong>. Refer to the code below to find their respective
output directories. Take note that the device tree file needs to be renamed to
<strong>devicetree.dtb</strong>.
See <a class="reference internal" href="../kuiper/sdcard/index.html#kuiper-sdcard"><span class="std std-ref">SD Card flashing</span></a> for more information in configuring the SD card.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>arch/arm/boot/uImage<span class="w"> </span>/media/BOOT/uImage
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>arch/arm/boot/dts/zynq-zc702-adv7511-ad9361.dtb<span class="w">  </span>/media/BOOT/devicetree.dtb
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="on-the-target-platform-devicetrees">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">On the target platform (devicetrees)</a><a class="headerlink" href="#on-the-target-platform-devicetrees" title="Link to this heading">#</a></h3>
<p>To modify devicetrees on the target platform:</p>
<ol class="arabic">
<li><p>Make sure the boot partition is mounted. On new images, this can be done by
right-clicking the boot icon on the desktop and selecting the “Mount Volume”
option. The partition will then be mounted at <em>/media/analog/boot</em>.</p></li>
<li><p>Convert the compiled devicetree related to the target back into an editable
format.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/media/analog/boot/zynq-zc702-adv7511
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/media/analog/boot/zynq-zc702-adv7511$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dtb<span class="w"> </span>-O<span class="w"> </span>dts<span class="w"> </span>-o<span class="w"> </span>devicetree.dts<span class="w"> </span>devicetree.dtb
</pre></div>
</div>
<div class="clear-left"></div></div></div></li>
<li><p>Modify the devicetree.dts file as required.</p></li>
<li><p>Recompile the devicetree file. Note that this will overwrite the original dtb
file, copy or rename the original file if you want to keep it before running
this step.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/media/analog/boot/zynq-zc702-adv7511
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/media/analog/boot/zynq-zc702-adv7511$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dts<span class="w"> </span>-O<span class="w"> </span>dtb<span class="w"> </span>-o<span class="w"> </span>devicetree.dtb<span class="w"> </span>devicetree.dts
</pre></div>
</div>
<div class="clear-left"></div></div></div></li>
</ol>
</section>
</section>
<section id="building-the-zynqmp-mpsoc-linux-kernel-and-devicetrees-from-source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Building the ZynqMP / MPSoC Linux kernel and devicetrees from source</a><a class="headerlink" href="#building-the-zynqmp-mpsoc-linux-kernel-and-devicetrees-from-source" title="Link to this heading">#</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Using a script</a><a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>We provide
<a class="icon git reference external" href="https://raw.githubusercontent.com/analogdevicesinc/wiki-scripts/main/linux/build_zynqmp_kernel_image.sh">a script</a>
that does automates the build for Zynq using the Linaro toolchain.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This script differs from the one for Zynq.</p>
</div>
<p>The script takes up to 3 parameters, but if left blank, it uses defaults:</p>
<ol class="arabic simple">
<li><p><strong>&lt;local_kernel_dir&gt;</strong> - default is <strong>linux-adi</strong> if left blank ; use this,
if you want to use an already cloned kernel repo</p></li>
<li><p><strong>&lt;devicetree_file&gt;</strong> - which device tree should be exported/copied from the
build. Default is <code class="docutils literal notranslate"><span class="pre">xilinx/zynqmp-zcu102-rev10-ad9361-fmcomms2-3.dtb</span></code> for
ZynqMP</p></li>
<li><p><strong>&lt;path_to_other_toolchain&gt;</strong> - in case you have your own preferred toolchain
(other than Linaro’s or Xilinx’s) you can use override it with this 3rd param</p></li>
</ol>
<p>The script will:</p>
<ul class="simple">
<li><p>Clone the ADI kernel tree</p></li>
<li><p>Download the Linaro GCC toolchain (if no other is specified)</p></li>
<li><p>Build the ADI kernel tree</p></li>
<li><p>Export/copy the Image file and device tree file out of the kernel build folder</p></li>
</ul>
<p>Running the script in one line, with defaults:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://raw.githubusercontent.com/analogdevicesinc/wiki-scripts/main/linux/build_zynqmp_kernel_image.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">       </span>chmod<span class="w"> </span>+x<span class="w"> </span>build_zynqmp_kernel_image.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">       </span>./build_zynqmp_kernel_image.sh
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="id2">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Building with Petalinux</a><a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>Please see here: <a class="reference internal" href="petalinux.html#linux-kernel-petalinux"><span class="std std-ref">Building with Petalinux</span></a>.</p>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">On the development host</a><a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>Make sure you have <code class="docutils literal notranslate"><span class="pre">u-boot-tools</span></code> installed, to have the <code class="docutils literal notranslate"><span class="pre">mkimage</span></code> utility
available. You can install it via your distro’s package manager.</p>
<p>Then</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/analogdevicesinc/linux.git<span class="w"> </span><span class="se">\</span>
<span class="w">            </span>--no-single-branch<span class="w"> </span>--depth<span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span>--<span class="w"> </span>linux
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>or do a git pull in a existing cloned repository.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">depth</span></code> and <code class="docutils literal notranslate"><span class="pre">no-single-branch</span></code> options are included to speed up the
cloning by fetching only near the head of each branch/release, you may remove
them to fetch all history, but bear in mind it will go from around 800MB to
around 3.4GB and growing.</p>
<section id="checkout-the-main-development">
<h4>Checkout the main development<a class="headerlink" href="#checkout-the-main-development" title="Link to this heading">#</a></h4>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>main
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>Already on &#39;main&#39;
Your branch is up-to-date with &#39;origin/main&#39;.
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="add-aarch64-linux-gnu-gcc-to-path">
<h4>Add aarch64-linux-gnu-gcc to PATH<a class="headerlink" href="#add-aarch64-linux-gnu-gcc-to-path" title="Link to this heading">#</a></h4>
<section id="id4">
<h5>Using the Xilinx toolchain<a class="headerlink" href="#id4" title="Link to this heading">#</a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span><span class="nv">$PATH_TO_XILINX</span>/Vitis/<span class="nv">$VITIS_VERSION</span>/settings64.sh
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>which<span class="w"> </span>aarch64-linux-gnu-gcc
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>$PATH_TO_XILINX/Vitis/$VITIS_VERSION/gnu/aarch64/lin/aarch64-linux/bin/aarch64-linux-gnu-gcc
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>Find the path to the Xilinx installation folder, and then use
it to replace this string: <strong>$PATH_TO_XILINX</strong> that is written above.
Same goes for the <strong>$VITIS_VERSION</strong>, where you choose the Vitis version.</p>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="s2">&quot;aarch64-linux-gnu-&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="id5">
<h5>Using the Linaro toolchain<a class="headerlink" href="#id5" title="Link to this heading">#</a></h5>
<p>Alternatively, the Linaro toolchain/compiler can be used to compile to kernel.
Linaro compilers (that work with ZYNQMP) can be downloaded from
<a class="reference external" href="https://releases.linaro.org/components/toolchain/binaries/latest-7/aarch64-linux-gnu">here</a>.
Always use the latest release just in case.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://releases.linaro.org/components/toolchain/binaries/latest-7/aarch64-linux-gnu/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu.tar.xz
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-xvf<span class="w"> </span>gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu.tar.xz
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="id6">
<h4>Configure the kernel<a class="headerlink" href="#id6" title="Link to this heading">#</a></h4>
<p>Inside the repository, generate the configuration file before building the
kernel tree.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>adi_zynqmp_defconfig
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>#
# configuration written to .config
#
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>Build the kernel via ‘make’. This is the same for all Xlinx ZYNQMP MPSoC FPGAs.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>-j5<span class="w"> </span>Image<span class="w"> </span><span class="nv">UIMAGE_LOADADDR</span><span class="o">=</span>0x8000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>  CHK     include/config/kernel.release
  CHK     include/generated/uapi/linux/version.h
  HOSTCC  scripts/basic/fixdep
  HOSTCC  scripts/basic/bin2c

[ -- snip --]

  CC      init/version.o
  LD      init/built-in.o
  KSYM    .tmp_kallsyms1.o
  KSYM    .tmp_kallsyms2.o
  LD      vmlinux
  SORTEX  vmlinux
  SYSMAP  System.map
  OBJCOPY arch/arm64/boot/Image
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="build-the-devicetree-fcmomms2-3">
<h4>Build the devicetree FCMOMMS2/3<a class="headerlink" href="#build-the-devicetree-fcmomms2-3" title="Link to this heading">#</a></h4>
<p>Build the one that fits your FPGA carrier and FMC card</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>device tree</p></th>
<th class="head"><p>board</p></th>
<th class="head"><p>chip</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>zynqmp-zcu102-rev10-ad9361-fmcomms2-3.dts</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZCU102">ZCU102</a> <strong>Rev. 1.0</strong></p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynqmp-zcu102-rev10-ad9364-fmcomms4.dts</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZCU102">ZCU102</a> <strong>Rev. 1.0</strong></p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>zynqmp-zcu102-revB-ad9361-fmcomms2-3.dts</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZCU102">ZCU102</a> Rev.B</p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms2-ebz">AD-FMCOMMS2-EBZ</a> or</div>
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">AD-FMCOMMS3-EBZ</a> board</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>zynqmp-zcu102-revB-ad9364-fmcomms4.dts</p></td>
<td><p><a class="reference external" href="https://www.xilinx.com/ZCU102">ZCU102</a> Rev.B</p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.analog.com/resources/eval/user-guides/ad-fmcomms4-ebz">AD-FMCOMMS4-EBZ</a> board</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>The device tree <strong>zynqmp-zcu102-revA.dts</strong> can also be used for any ZCU102 FPGA
that uses an SD card for boot up. Building the device tree uses ‘make’ by
turning the .dts file to a .dtb. The command is simply ‘make’ plus the device
tree name with a .dtb file extension.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>xilinx/zynqmp-zcu102-rev10-ad9361-fmcomms2-3.dtb
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>DTC     arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-ad9361-fmcomms2-3.dtb
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="id7">
<h4>Copy the generated files to your SD Card<a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<p>The output files for building the kernel and device tree are <strong>uImage</strong> and
<strong>&lt;device_tree_name&gt;.dtb</strong>. Refer to the code below to find their respective
output directories. Take note that the device tree file needs to be renamed to
<strong>devicetree.dtb</strong>.
See <a class="reference internal" href="../kuiper/sdcard/index.html#kuiper-sdcard"><span class="std std-ref">SD Card flashing</span></a> for more information in configuring the SD card.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>arch/arm64/boot/Image<span class="w"> </span>/media/michael/BOOT/
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="bold highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>arch/arm64/boot/dts/xilinx/zynqmp-zcu102-revB-ad9361-fmcomms2-3.dtb<span class="w"> </span>/media/michael/BOOT/system.dtb
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="common-issues">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Common Issues</a><a class="headerlink" href="#common-issues" title="Link to this heading">#</a></h3>
<p>This sections goes through common issues related to the Linux Kernel on the
ZynqMP.</p>
<section id="displayport-no-picture">
<h4>DisplayPort - no picture?<a class="headerlink" href="#displayport-no-picture" title="Link to this heading">#</a></h4>
<p>The default configuration for most of the projects is to use the HDMI output,
and that is what the configuration is set up for.</p>
<p>For DisplayPort projects, you may need to add a custom <code class="docutils literal notranslate"><span class="pre">xorg.conf</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;Section &quot;Device&quot;</span>
<span class="s1">  Identifier &quot;myfb&quot;</span>
<span class="s1">  Driver &quot;fbdev&quot;</span>
<span class="s1">  Option &quot;fbdev&quot; &quot;/dev/fb0&quot;</span>
<span class="s1">EndSection&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/X11/xorg.conf
</pre></div>
</div>
<p>After following that, the board should be rebooted.</p>
<p>You can find a list with tested monitors
<a class="reference external" href="https://www.xilinx.com/support/answers/68671.html">here</a>.
Resolution or image problems may appear if there is used a monitor that was not
tested.</p>
</section>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../drivers/iio/iio-trig-bfin-timer.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">iio-trig-bfin-timer driver</a>
    <a href="petalinux.html" title="Next document (Alt+Shift+RightArrow)" class="next">Building with Petalinux</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>