<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Activity: Buck Converter Basics &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=ab97267f" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="../../../_static/app.umd.js?v=689b8755"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Learning! Tutorials, Workshops, Etc" href="../../../learning/index.html" />
    <link rel="prev" title="Activity: Efficiency, Power Loss, and Thermal Management" href="../efficiency_power_loss/index.html" />
   
  
  <meta name="global_root" content="../../../../">
  <meta name="repo" content="documentation">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../index.html" class="current">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Activity: Buck Converter Basics</a><ul>
<li><a class="reference internal" href="#objective">Objective:</a></li>
<li><a class="reference internal" href="#workshop-slide-deck">Workshop Slide Deck</a></li>
<li><a class="reference internal" href="#background">Background:</a><ul>
<li><a class="reference internal" href="#materials">Materials</a></li>
</ul>
</li>
<li><a class="reference internal" href="#activity-1-an-open-loop-2-1-buck-converter">Activity 1: An Open-Loop 2:1 Buck Converter</a><ul>
<li><a class="reference internal" href="#theory-and-simulation">Theory and Simulation</a><ul>
<li><a class="reference internal" href="#simulation-using-ideal-components">Simulation using ideal components</a></li>
<li><a class="reference internal" href="#simulation-using-simulated-real-components">Simulation using “simulated real” components</a></li>
<li><a class="reference internal" href="#ripple-current-and-ripple-voltage">Ripple Current and Ripple Voltage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#circuit-construction-and-testing">Circuit Construction and Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#activity-2-an-open-loop-variable-buck-converter">Activity 2: An Open-Loop Variable Buck Converter</a><ul>
<li><a class="reference internal" href="#theory-and-simulation-1">Theory and Simulation</a></li>
<li><a class="reference internal" href="#circuit-construction-and-testing-1">Circuit Construction and Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#activity-3-a-closed-loop-voltage-mode-buck-converter">Activity 3: A closed-Loop, Voltage Mode Buck Converter</a><ul>
<li><a class="reference internal" href="#theory-and-simulation-2">Theory and Simulation</a></li>
<li><a class="reference internal" href="#circuit-construction-and-testing-2">Circuit Construction and Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#going-further">Going Further</a></li>
<li><a class="reference internal" href="#questions">Questions:</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../index.html" class="current">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../../testbenches/index.html">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../../linux/kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kuiper/update.html">Updating</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/index.html">Linux drivers</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/index.html">IIO Transceivers</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/adrv9009/index.html">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../linux/drivers/iio-transceiver/adrv9009/customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../../../linux/drivers/iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../linux/drivers/iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../linux/drivers/iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../../linux/kernel/index.html">Kernel and devicetrees</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../linux/kernel/petalinux.html">Building with Petalinux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../../../software/libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6"/><div class="collapse"><a class="reference internal" href="../../../software/matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/pyadi-iio/index.html">PyADI-IIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/eval-adxl355-pmdz/index.html">ADXL355 3-Axis MEMS Accelerometer Developer Resources</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7-1" id="toctree-collapse-7-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-7-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7-1-1" id="toctree-collapse-7-1-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-7-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../eval/user-guide/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/eval-adtf3175d-nxz/index.html">EVAL-ADTF3175D-NXZ User Guide</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8" checked=""/><div class="collapse"><a class="reference internal" href="../../index.html">Engineering University Program</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8-1" id="toctree-collapse-8-1" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-8-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Activity: Buck Converter Basics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/sw_infrastructure/index.html">Key ADI’s Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshop_what_sw_for_sdr/index.html">What software do I need for my SDR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/low_freq_noise/index.html">Low Frequency Noise KWIK Lecture + Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/integrated_noise/index.html">Integrated Noise KWIK Lecture + Lab</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LTspice Examples</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-10" id="toctree-collapse-10"/><div class="collapse"><a class="reference internal" href="../../../ltspice_examples/index.html">LTspice Examples</a><label for="toctree-collapse-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ltspice_examples/lvds_pair/index.html">LTspice Example: LVDS pair</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/forking_publishing.html">Forking and publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/creating_new_pages.html">Creating new pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="activity-buck-converter-basics">
<h1>Activity: Buck Converter Basics<a class="headerlink" href="#activity-buck-converter-basics" title="Link to this heading"></a></h1>
<section id="objective">
<h2>Objective:<a class="headerlink" href="#objective" title="Link to this heading"></a></h2>
<p>The objective of this activity is to explore some basic principles of a buck
converter, a power conversion circuit that efficiently produces an output
voltage that is lower than the supplied voltage:</p>
<ul class="simple">
<li><p>Inductor characteristics (current / voltage / time relationships)</p></li>
<li><p>Volt-second balance</p></li>
<li><p>Pulse-Width Modulation</p></li>
<li><p>Inductor current ripple</p></li>
<li><p>Output voltage ripple</p></li>
<li><p>Open-loop vs. closed loop operation</p></li>
<li><p>Voltage-mode control</p></li>
</ul>
</section>
<section id="workshop-slide-deck">
<h2>Workshop Slide Deck<a class="headerlink" href="#workshop-slide-deck" title="Link to this heading"></a></h2>
<p>A slide deck is provided as a companion to this exercise, and can be used to
help in presenting this material in classroom, lab setting, or in hands-on
workshops.</p>
<div class="admonition-download admonition">
<p class="admonition-title">Download</p>
<p><a class="reference download internal" download="" href="../../../_downloads/e5583cb1329f91550a6d6d617c7dce14/workshop_buck_converter_basics.pptx"><code class="xref download docutils literal notranslate"><span class="pre">Buck</span> <span class="pre">Converter</span> <span class="pre">Basics</span> <span class="pre">Slide</span> <span class="pre">Deck</span></code></a></p>
</div>
</section>
<section id="background">
<h2>Background:<a class="headerlink" href="#background" title="Link to this heading"></a></h2>
<p>Most electrical engineers and students are familiar with linear voltage
regulators, such as the LM7805 positive 5V regulator or the LM317 adjustable
positive regulator. Linear regulators are suitable for applications in which one
of the following is true:</p>
<ul class="simple">
<li><p>Small load current drawn from the regulated output (where the input voltage
might be much higher than the output voltage)</p></li>
</ul>
<p><a class="reference internal" href="../../../_images/ldo_hi_v_lo_i.png"><img alt="image1" src="../../../_images/ldo_hi_v_lo_i.png" style="width: 500px;" /></a></p>
<p>Figure 1. LDO with high voltage drop, low output
current</p>
<ul class="simple">
<li><p>Large load current drawn from the regulated output (where there is a small
difference between the unregulated input voltage and the regulated output
voltage)</p></li>
</ul>
<p><a class="reference internal" href="../../../_images/ldo_lo_v_hi_i.png"><img alt="image2" src="../../../_images/ldo_lo_v_hi_i.png" style="width: 500px;" /></a>  Figure 2. LDO with low voltage drop, high output
current</p>
<p>The reason for the conditions on current and input-output voltage difference is
that the linear regulator will always dissipate the product of the output
current and this voltage difference as heat. The following figure shows a
situation in which 3.5 watts of power will need to be dealt with, using a large
heat sink, fan, or both. <a class="reference internal" href="../../../_images/ldo_hi_v_hi_i.png"><img alt="image3" src="../../../_images/ldo_hi_v_hi_i.png" style="width: 500px;" /></a>  Figure 3. LDO with high
voltage drop, high output current</p>
<p>Heat sinks are large, expensive, and lose effectiveness if they accumulate dust.
Fans are loud and have limited lifetimes. And of course, electrical power lost
as heat costs just as much as power that does something useful in your circuit.
This is where buck converters are useful.</p>
<p><em>Note that all schematics are included as LTspice files, with simulation
parameters set up and ready to run. Run these simulations, and experiment with
different component values, voltages, etc.</em></p>
<section id="materials">
<h3>Materials<a class="headerlink" href="#materials" title="Link to this heading"></a></h3>
<div class="line-block">
<div class="line">ADALM2000 Active Learning Module</div>
<div class="line">PC running LTspice and Scopy</div>
<div class="line">Solder-less breadboard and jumper wire kit or Perma Proto solder breadboard</div>
<div class="line">ADALP2000 parts kit parts as required</div>
<div class="line">Optional: <a class="reference external" href="https://wiki.analog.com/university/tools/lab_hw/adalm_buck">ADALM-BUCK-ARDZ Module</a></div>
<div class="line">12V power supply (preferred) or 5V USB power supply (workable)</div>
<div class="line">Voltmeter (optional, can use M2K in Voltmeter mode.)</div>
<div class="line">LTspice files for this activity:
<a class="reference external" href="https://analogdevicesinc.github.io/DownGit/#/home?url=https://github.com/analogdevicesinc/education_tools/tree/master/m2k/ltspice/buck_ltspice">buck_ltspice</a></div>
</div>
</section>
</section>
<section id="activity-1-an-open-loop-2-1-buck-converter">
<h2>Activity 1: An Open-Loop 2:1 Buck Converter<a class="headerlink" href="#activity-1-an-open-loop-2-1-buck-converter" title="Link to this heading"></a></h2>
<section id="theory-and-simulation">
<h3>Theory and Simulation<a class="headerlink" href="#theory-and-simulation" title="Link to this heading"></a></h3>
<section id="simulation-using-ideal-components">
<h4>Simulation using ideal components<a class="headerlink" href="#simulation-using-ideal-components" title="Link to this heading"></a></h4>
<p>Open the Buck_Concept.asc LTspice file. The figure below shows one of the two
states of the circuit’s operation, where S1 is closed and S2 is open.</p>
<p><a class="reference internal" href="../../../_images/ideal_buck_charge2.png"><img alt="image4" src="../../../_images/ideal_buck_charge2.png" style="width: 600px;" /></a>  Figure 4. Buck converter top switch closed</p>
<p>Assume Vout is some voltage between zero (ground) and Vin (5V). When S1 closes,
the lefthand side of inductor L1 is connected to the 5V supply, and the current
through L1 ramps up with a slope of:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[di/dt = (5.0-V_{OUT})/L1\]</div>
</div>
<p>The next figure shows the other state, with S1 open and S2 closed.</p>
<p><a class="reference internal" href="../../../_images/ideal_buck_discharge2.png"><img alt="image5" src="../../../_images/ideal_buck_discharge2.png" style="width: 600px;" /></a>  Figure 5. Buck converter bottom switch closed</p>
<p>When S2 closes, the lefthand side of inductor L1 is connected to ground, and the
current through L1 decreases with a slope of:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[di/dt = (0-V_{OUT})/L1\]</div>
</div>
<p>The “freq” and “duty” parameters set the frequency of the switching to 25kHz and
the duty cycle of the voltages imposed on this switch node (sw_node) to 50%.
That is, the lefthand side of the inductor spends half of the time connected to
the input supply, and half of the time connected to ground. Run the simulation,
and probe sw_node, Vout, and the current through inductor L1. Zoom in toward the
end of the run after the startup transient damps out. (You can right-click,
Autorange y-axis to line up the two waveforms.)</p>
<p><a class="reference internal" href="../../../_images/ideal_buck_waveforms.png"><img alt="image6" src="../../../_images/ideal_buck_waveforms.png" style="width: 500px;" /></a>  Figure 6. Inductor current, switch node, output</p>
<p>Hover the cursor over the peak and valley of the I(L1) waveform, noting the
current values. (We already know the high time and low time of the waveform -
the period is 1/25kHz, or 40us, and the duty cycle is 50%, so the high time and
low time are both 20 microseconds.)</p>
<p>The output voltage looks like it is approximately 2.5V, with some “ripple”
superimposed. If this is the case, verify that these equations hold true:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[di/dt = (5.0V-2.5V)/(100uH)\]</div>
</div>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[di/dt = (-2.5V)/(100uH)\]</div>
</div>
<p>The output voltage <strong>looks</strong> close to 2.5V, but is it <strong>exactly</strong> 2.5V? One of
the basic assumptions of an inductor’s operation in a circuit is that the DC
(steady-state) voltage across an ideal inductor is zero. To see why, let’s try
to go against this rule. Open the <em>“runaway_inductor.asc”</em> LTspice simulation:</p>
<p><a class="reference internal" href="../../../_images/runaway_ind_sch.png"><img alt="image7" src="../../../_images/runaway_ind_sch.png" style="width: 500px;" /></a>  Figure 7. Runaway Inductor Schematic</p>
<p>and run it, probing the inductor current:</p>
<p><a class="reference internal" href="../../../_images/runaway_ind_waveforms.png"><img alt="image8" src="../../../_images/runaway_ind_waveforms.png" style="width: 500px;" /></a>  Figure 8. Runaway Inductor Current</p>
<p>The simulation applies the same 5V across the same 100uH inductor, but instead
of switching at 25kHz, the voltage source is left connected continuously. The
simulation steps through four values of inductor DC resistance (all inductors
have some resistance, usually specified in the inductor’s datasheet.) The first
resistance is very small, a close-to-ideal 1 micro-ohm (LTspice does not allow a
value of true zero). The current climbs almost linearly to 500 amps in 10
milliseconds! Even with higher resistances of one milliohm, ten milliohms, and
0.1 ohms, currents are still unrealistically high for the experiments we will be
doing shortly. (A simulation is very useful for exploring “what if?” situations
in a circuit that would not be possible in a real experiment.)</p>
<p>So how can we apply this rule of zero DC across an inductor to find the output
voltage of a buck converter, knowing the duty cycle? “Zero DC across an
inductor” means that if a voltage is applied in one polarity for a given time,
imposing a certain volt-second product, an equal but opposite volt-second
product must also be applied, such that over a long period of time, the average
volt-second product is zero. Thus:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[(V_{IN} - V_{OUT}) * t_{S1} = 0V - V_{OUT} * t_{S2}S\]</div>
</div>
<p>where tS1 is the time that S1 is closed, tS2 is the time that S2 is closed.</p>
<p>Solving for Vout:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[V_{OUT} = V_{IN} * t_{S1}/(t_S1 + t_{S2})\]</div>
</div>
<p>Noting that</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[t_{S1}/(t_{S1} + t_{S2})\]</div>
</div>
<p>is the duty cycle of the sw_node waveform:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[V_{OUT} = V_{IN} * Duty Cycle\]</div>
</div>
<p>So for a 50% duty cycle, the output voltage is half of the input voltage.</p>
</section>
<section id="simulation-using-simulated-real-components">
<h4>Simulation using “simulated real” components<a class="headerlink" href="#simulation-using-simulated-real-components" title="Link to this heading"></a></h4>
<p>While normally intended as a switched-capacitor converter, the LT1054 can be
configured to illustrate the basic operation of a buck converter. The CAP+ pin
is a convenient “push-pull driver” that is alternately connected to the input
supply (VIN pin) and ground (GND pin). The LT1054 has a built-in 25kHz, 50% duty
cycle oscillator, so a fixed 2:1 ratio buck converter can be easily implemented.</p>
<p>Open LT1054_2to1_buck.asc in LTspice, and run the simulation.</p>
<p><a class="reference internal" href="../../../_images/lt1054_open_loop_buck.png"><img alt="image9" src="../../../_images/lt1054_open_loop_buck.png" style="width: 800px;" /></a>  Figure 9. Open-loop 2:1 Buck Converter</p>
<p>A few things to note about the LTspice schematic: The Coilcraft HPH1-1400L
6-winding transformer allows the circuit to be simulated / tested with several
different values of inductance. The “K1 L1 L2 L3 L4 L5 L6 0.95” statement tells
LTspice that the windings are on the same core (coupled), rather than discrete
inductors. This means that the inductance will increase by the square of the
number of inductors connected in series: 202uH for a single inductor, and 202uH
* 36 = 7.2mH when all six inductors are connected in series.</p>
<p>Note that the circuit elements in dashed boxes apply stimulus for the
simulation, with opening and closing of switches representing the connection or
disconnection of a jumper wire on your breadboard.</p>
<p>The figure below shows the turn-on transient of the circuit, with ringing due to
resonance between the inductor and output capacitance, which is damped out by
the load resistance. At 4 milliseconds, a 50-ohm load is connected to the
output, causing a drop in the output voltage. This drop is due to finite
impedances in the LT1054’s switches, as well as the inductor’s DC resistance.</p>
<p><a class="reference internal" href="../../../_images/lt1054_2_to_1_transient.png"><img alt="image10" src="../../../_images/lt1054_2_to_1_transient.png" style="width: 600px;" /></a>  Figure 10. Turn-on and Load Step Transients</p>
</section>
<section id="ripple-current-and-ripple-voltage">
<h4>Ripple Current and Ripple Voltage<a class="headerlink" href="#ripple-current-and-ripple-voltage" title="Link to this heading"></a></h4>
<p>Now we’ve got a circuit that efficiently converts one voltage to another,
without burning lots of power. In fact if you had an application where there was
a well-regulated 12V power supply available, and a downstream circuit needed a
“not-too-well-regulated” 6V supply, this buck converter might be perfectly
appropriate. Let’s start examining some of the imperfections and decisions
involved in designing a buck converter. One of the most important is the
selection of the inductor value. Even when the output is unloaded, there will be
a “ripple current” always flowing in the inductor as the input side of the
inductor is alternately connected to the high-voltage input supply and ground.
The peak-to-peak ripple current can be calculated as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\Delta I_{L(p-p)} = \frac{(V_{IN}-V_{O})*V_{O}/V_{IN}}{L*f_S}\]</div>
</div>
<p>So a higher inductance would seem to be better, as the ripple current is
proportionally lower. However, it takes more wire to make a higher-value
inductor, and the resistance will be higher. There are often limitations on how
physically large an inductor can be as well; portable electronics often require
circuits to be as small as practical, and sometimes as small as physically
possible. In general, a peak-to-peak ripple current is chosen to be between 10%
and 60% of the DC output current.</p>
<p>Why does ripple current matter? Ideally, any DC-DC converter (LDO, Buck, Boost,
etc.) produces a stable, low-noise output voltage from an imperfect (noisy,
variable) input voltage. Ripple current induces a corresponding ripple in the
regulated output voltage, as the ripple current charges and discharges the
output capacitance by a small amount. Ripple voltage can be calculated as:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\Delta V_{OUT} \approx I_{L(p-p)} * \left( ESR + \frac{1}{8*f_S*C_{OUT}} \right)\]</div>
</div>
<p>So a higher output capacitance will result in a lower ripple voltage. But as
with the inductor, there are often limitations on how physically large a
capacitor can be. Also note the “ESR” term, which is the equivalent series
resistance of the capacitor. This resistance will be listed in a capacitor’s
datasheet.</p>
<p>The LT1054_2to1_buck.asc simulation allows you to easily experiment with
different inductances and capacitances. Try connecting the input side of R1 (the
current-sense reistor) to the various “taps” in the series-connected inductors.
For each run, probe the current in R1 and the voltage at Vout. The figure below
shows a stepped simulation, for between 1 and 6 of the HPH1-1400L’s inductors
connected in series:</p>
<p><a class="reference internal" href="../../../_images/lt1054_buck_ripple.png"><img alt="image13" src="../../../_images/lt1054_buck_ripple.png" style="width: 600px;" /></a>  Figure 11. Inductor Ripple Current and Output
Ripple Voltage</p>
<p>With the green trace showing a decreasing ripple current with increasing
inductance, and the red trace showing a corresponding decrease in ripple
voltage… accompanied by poorer load regulation due to the increased resistance
of the windings. (Try increasing the .param dcr to 0.5 ohms to make this effect
more apparent.)</p>
</section>
</section>
<section id="circuit-construction-and-testing">
<h3>Circuit Construction and Testing<a class="headerlink" href="#circuit-construction-and-testing" title="Link to this heading"></a></h3>
<p>Build the following breadboard circuit for the buck converter, following the
schematic in Figure 16. (Q1, R2, R3 can be added later.) Note that the
HPH1-1400L has six inductors that can be connected in any way (series, parallel,
or a combination of the two). Be sure to observe proper polarity, connecting all
inductors in series as shown. &lt;WRAP info&gt; The circuits in this lab are
compatible with solderless breadboard construction. However they are relatively
complicated and take time to construct and debug. The <a class="reference external" href="https://wiki.analog.com/university/tools/lab_hw/adalm_buck">ADALM-BUCK-ARDZ Module</a> is available as an alternative.</p>
<p><a class="reference internal" href="../../../_images/lt1054_2_to_1_bb.png"><img alt="image14" src="../../../_images/lt1054_2_to_1_bb.png" style="width: 800px;" /></a>  Figure 12. Breadboard Circuit</p>
<p>The circuit can also be soldered on a “Perma Proto” solderable breadboard from
Adafruit or DigiKey SolderFul breadboard, which match the layout of typical solderless breadboards.</p>
<p><a class="reference internal" href="../../../_images/lt1054_buck_perma_proto_sm.jpg"><img alt="image15" src="../../../_images/lt1054_buck_perma_proto_sm.jpg" style="width: 600px;" /></a>  Figure 13. Alternate Construction Method</p>
<p>Measure the ripple current for different numbers of series-connected inductors.
The animated figure below shows the ripple current for 2, 3, 4, 5, and 6
inductors. How well does this match the LTspice simulation?</p>
<p><a class="reference internal" href="../../../_images/lt1054_buck_multi_inductors.gif"><img alt="image16" src="../../../_images/lt1054_buck_multi_inductors.gif" style="width: 800px;" /></a>  Figure 14. Ripple Current for 2 to 6 Windings in
Series</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice the “steps” in the switch node voltage as the inductor current passes
through zero. After switching, current initially flows through diodes D1 or D2.
As the current passes through zero and switches direction, the LT1054 output
driver “takes over” and drives the switch node. In the LTspice simulation, try
probing the LT1054 CAP+ current, D1 current, and D2 current separately, noting
that the inductor current is the sum of the three.</p>
</div>
<p>Measure the ripple voltage at the output of the converter, with a 22uF output
capacitor. Then place an additional 47uF capacitor in parallel, for a total of
69uF. Does the measured ripple match the simulated ripple reasonably well? Note
that both the inductor and electrolytic capacitors can have a very wide
tolerance - tolerances of +/-20% are common for inductors, and -20%/+80% is a
common tolerance for electrolytic capacitors.</p>
<p>The animated figure below shows the ripple voltage for output capacitances of
22uF and 22uF+47uF. <a class="reference internal" href="../../../_images/lt1054_buck_ripple_voltage.gif"><img alt="image17" src="../../../_images/lt1054_buck_ripple_voltage.gif" style="width: 800px;" /></a>  Figure 15. Output Ripple for
22uF, 22+47uF output capacitance</p>
</section>
</section>
<section id="activity-2-an-open-loop-variable-buck-converter">
<h2>Activity 2: An Open-Loop Variable Buck Converter<a class="headerlink" href="#activity-2-an-open-loop-variable-buck-converter" title="Link to this heading"></a></h2>
<section id="theory-and-simulation-1">
<span id="id1"></span><h3>Theory and Simulation<a class="headerlink" href="#theory-and-simulation-1" title="Link to this heading"></a></h3>
<p>The LT1054’s internal oscillator can be overridden with a simple external
circuit shown in the datasheet, allowing the frequency and duty cycle to be
changed. Add this circuit to your breadboard, and connect to digital I/O DIO 0
on the M2K, or to a benchtop pulse generator.</p>
<p>This circuit is also included in the LT1054_buck_complete.asc LTspice
simulation. (Ignore the text in the dashed box, we’ll get to that in the next
experiment!)</p>
<p><a class="reference internal" href="../../../_images/lt1054_closed_loop_buck.png"><img alt="image18" src="../../../_images/lt1054_closed_loop_buck.png" style="width: 900px;" /></a>  Figure 16. Buck Converter with Internal Oscillator
Override</p>
<p>Open the circuit and run the simulation; the duty cycle and frequency are
parameterized so that they can be easily changed. Test several values of the
duty cycle (20%, 40%, 60%, 80%), show that VOUT = VIN * Duty Cycle</p>
</section>
<section id="circuit-construction-and-testing-1">
<span id="id2"></span><h3>Circuit Construction and Testing<a class="headerlink" href="#circuit-construction-and-testing-1" title="Link to this heading"></a></h3>
<p>Use M2K to override the LT1054’s internal oscillator. Open Scopy’s pattern
generator, and take measurements at 20%, 40%, 60%, 80% duty cycle. &lt;&lt;add setup
details, make a Scopy ini file.&gt;&gt; Set back to 50%, then connect a 50-ohm load.
Calculate the approximate output impedance.</p>
</section>
</section>
<section id="activity-3-a-closed-loop-voltage-mode-buck-converter">
<h2>Activity 3: A closed-Loop, Voltage Mode Buck Converter<a class="headerlink" href="#activity-3-a-closed-loop-voltage-mode-buck-converter" title="Link to this heading"></a></h2>
<section id="theory-and-simulation-2">
<span id="id3"></span><h3>Theory and Simulation<a class="headerlink" href="#theory-and-simulation-2" title="Link to this heading"></a></h3>
<p>Obviously, sensitivity to input voltage changes and output loading is
undesirable. The figure below shows a feedback path that observes the output
voltage, and adjusts the duty cycle accordingly. That is, if the load increases,
causing a drop in output voltage, this will be sensed by “something” that will
increase the duty cycle to compensate and bring the output voltage back to it’s
desired value. There are various ways to accomplish this: we’ll leave it as an
extra activity to close loop in (either in LTspice or on the breadboard) using a
voltage reference, op-amp, and an LTC6992 PWM generator. The result will be a
true voltage-mode buck converter.</p>
<p>This feedback path can be implemented in another way - using a
software-programmable feedback loop. The M2K already has the required elements -
it can measure the output voltage, and control the duty cycle of a digital
output. Scopy includes a “debug mode” that allows interaction with JavaScript
programs, and a script is included in the resources section that does this.</p>
<p>Yet another way is to use an Arduino Uno microcontroller to close the loop. The
Uno has 6 analog inputs, one of which can be used to measure the output voltage.
It also includes several PWM outputs, that can be used to control the duty cycle
of the LT1054.</p>
</section>
<section id="circuit-construction-and-testing-2">
<span id="id4"></span><h3>Circuit Construction and Testing<a class="headerlink" href="#circuit-construction-and-testing-2" title="Link to this heading"></a></h3>
<p>Connect the buck output to the A0 analog pin on the Arduino and the Arduino’s D3
digital signal to the buck converter’s control input. Figure 17 shows
connections to an Arduino Uno clone. The yellow wire connects the buck output to
the Arduino’s A0 input, and the blue wire connects the Arduino’s PWM output on
Digital Pin 3 to the oscillator override input. (Using two ground wires ensures
a lower inductance connection between circuit grounds.)</p>
<p><a class="reference internal" href="../../../_images/lt1054_arduino_in_loop.jpg"><img alt="image19" src="../../../_images/lt1054_arduino_in_loop.jpg" style="width: 400px;" /></a>  Figure 17. Buck Converter with Arduino Control</p>
<p>Copy this Arduino sketch into your Arduino sketchbook (and restart the Arduino
IDE if it’s open.) &lt;WRAP round download&gt;</p>
<div class="admonition-download admonition">
<p class="admonition-title">Download</p>
<p><a class="reference download external" download="" href="https://analogdevicesinc.github.io/DownGit/#/home?url=https://github.com/analogdevicesinc/Linduino/tree/master/LTSketchbook/Active%2520Learning/LT1054_voltage_mode_buck_DC_ctrl"><code class="xref download docutils literal notranslate"><span class="pre">Arduino</span> <span class="pre">Sketch:</span> <span class="pre">`LT1054</span> <span class="pre">closed</span> <span class="pre">loop</span> <span class="pre">buck</span> <span class="pre">with</span> <span class="pre">duty</span> <span class="pre">cycle</span> <span class="pre">control</span></code></a></p>
</div>
<p>The following figure shows the operation of the closed-loop circuit. The
setpoint voltage is 3.141V, and the purple trace starts out close to this value
at the lefthand side of the Scopyshot. A 50 ohm load is then connected to the
output, drawing approximately 120mA, and producing a dip in the output voltage.
The Arduino loop detects this and increases the PWM frequency accordingly,
restoring the voltage to its correct value. Then the resistor is removed,
producing an increase in the output voltage. Once again, the Arduino loop
detects this disturbance and compensates.</p>
<p><a class="reference internal" href="../../../_images/lt1054_buck_arduino_load_transient.png"><img alt="image20" src="../../../_images/lt1054_buck_arduino_load_transient.png" style="width: 800px;" /></a>  Figure 18. Arduino Controlled Buck Transient
Response</p>
<p>&lt;WRAP round download&gt; <strong>Resources:</strong></p>
<ul class="simple">
<li><p>LTSpice files:
<a class="reference external" href="https://analogdevicesinc.github.io/DownGit/#/home?url=https://github.com/analogdevicesinc/education_tools/tree/master/m2k/ltspice/buck_ltspice">buck_ltspice</a></p></li>
<li><p>Fritzing files:
<a class="reference external" href="https://analogdevicesinc.github.io/DownGit/#/home?url=https://github.com/analogdevicesinc/education_tools/tree/master/m2k/fritzing/buck_bb">buck_bb</a></p></li>
<li><p>JavaScript files:
<a class="reference external" href="https://analogdevicesinc.github.io/DownGit/#/home?url=https://github.com/analogdevicesinc/education_tools/tree/master/m2k/javascript/buck_script">buck_script</a></p></li>
</ul>
</section>
</section>
<section id="going-further">
<h2>Going Further<a class="headerlink" href="#going-further" title="Link to this heading"></a></h2>
<div class="line-block">
<div class="line">This activity borrows heavily from Analog Devices Application Note 140, which
is an excellent reference to build upon concepts in this activity:</div>
<div class="line"><a class="reference external" href="http://www.analog.com/media/en/technical-documentation/application-notes/AN140fb.pdf">Application Note 140</a></div>
</div>
<div class="line-block">
<div class="line">AN19 is the LT1070 design manual, rich with examples:</div>
<div class="line"><a class="reference external" href="http://www.analog.com/media/en/technical-documentation/application-notes/an19fc.pdf">Application Note 19</a></div>
</div>
<div class="line-block">
<div class="line">Article on simulating SMPS loop gain (and why it’s often unnecessary):</div>
<div class="line"><a class="reference external" href="http://www.analog.com/en/technical-articles/ltspice-extracting-switch-mode-power-supply-loop-gain-in-simulation-and-why-you-usually-don-t-need.html">Extracting Switch Mode Power Supply Loop Gain in Simulation</a></div>
</div>
</section>
<section id="questions">
<h2>Questions:<a class="headerlink" href="#questions" title="Link to this heading"></a></h2>
<div class="line-block">
<div class="line">Return to <a class="reference external" href="https://wiki.analog.com/university/labs/power">Power Based Lab Activity Material</a></div>
<div class="line">Return to <a class="reference external" href="https://wiki.analog.com/university/">Engineering University Program Home</a></div>
</div>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../efficiency_power_loss/index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Activity: Efficiency, Power Loss, and Thermal Management</a>
    <a href="../../../learning/index.html" title="Next document (Alt+Shift+RightArrow)" class="next">Learning! Tutorials, Workshops, Etc</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>